import{S as e,i as t,s as i,F as s,G as o}from"./client.dc2ff031.js";const a=[{id:"lalaland",title:"La La Land",img:"dancepose/lalaland.svg",keyPoint:"Ankle",theme:"0",particle:"square",size:["960","540"],color:[[209,172,40,250],[212,16,46,250],[180,75,187,250]]},{id:"fred",title:"Fred Astaire y Ginger Rogers en Sombrero de copa",img:"dancepose/fred.svg",keyPoint:"Wrist",theme:"0",particle:"square",size:["960","540"],color:[[247,23,53,220],[65,234,212,220],[255,159,28,220]]},{id:"billye",title:"Billy eliot",img:"dancepose/billy.svg",keyPoint:"Shoulder",theme:"0",particle:"square",size:["960","540"],color:[[4,157,217,220],[235,165,31,220],[249,249,249,220]]},{id:"rain",title:"Singing In The Rain ",img:"dancepose/rain.svg",keyPoint:"Ankle",theme:"0",particle:"square",size:["960","540"],color:[[221,255,247,220],[18,230,206,220],[233,12,218,220]]}];function n(e,t,i){let n,{p5:l}=t,{width:r=960}=t,{height:d=540}=t;const{page:h}=s();o(e,h,e=>i(22,n=e));let p=n.query;void 0===p.video&&(p.video="fred");let c,u,m,g,f,y,x,v,S=a.find(e=>e.id===p.video),P=[],k=[],D=!1,E=!0,z=!1,b=!1,w=S.color,V=S.keyPoint,C=["Wrist","Eye","Ear","Shoulder","Elbow","Hip","Knee","Ankle"],T="";function B(e,t,i){let s,o=e,a=t,n=l.random(360),r=o+1*l.cos(n),d=a+1*l.sin(n);s=l.floor(l.random(3));let h=l.random(3,6);k.push(new F(r,d,s,h,i)),k.push(new F(r,d,s,h,i))}class F{constructor(e,t,i,s,o){this.pos=l.createVector(e,t),this.paso=o,this.rMax=s,this.theta=l.random(360),this.thetaSpeed=l.random(-4,4),this.r=0,this.delta=0,this.speed=.05,this.life=2*this.rMax,this.isDeg=!1,this.isFinished=!1,this.colorIndex=i,this.ySpeed=l.random(.2,2),this.xNoise=l.random(1)}display(){this.isDeg?(this.r=this.rMax*q(this.delta),this.delta-=1.5*this.speed,this.delta<0&&(this.delta=0,this.isFinished=!0)):(this.r=this.rMax*q(this.delta),this.delta+=this.speed,this.delta>1&&(this.delta=1,this.isDeg=!0)),this.pos.x=this.pos.x+l.map(l.noise(this.xNoise),0,1,-5,5),l.noFill(),l.stroke(w[this.colorIndex]),l.push(),l.translate(this.pos.x,this.pos.y),l.rotate(this.theta),l.beginShape();for(let e=0;e<4;e++)l.vertex(this.r*g*l.cos(360*e/4),this.r*g*l.sin(360*e/4));l.endShape(l.CLOSE),l.pop(),this.theta+=this.thetaSpeed,m.particleDirection?this.pos.y-=this.ySpeed:this.pos.y+=this.ySpeed,this.xNoise+=.01}}function I(){this.Particle_size=.4,this.Volumen=.5,this.Disable_Video=!1,this.listBodyPart=V,this.listClip=p.video,this.Trail=b,this.Pause=!1,this.particleDirection=!1,this.Save=function(){z=!0,console.log("save frame")}}function N(){T="Loading AI model...",l.textSize(25),f.size(960,540),l.text(T,r/2-10,d/2+20),v=ml5.poseNet(f,_),v.on("pose",(function(e){P=e})),f.hide()}function _(){console.log("cargando el  modelos"),document.getElementById("logodp").remove(),T="",l.textSize(30),l.text(T,r/2,d/2),f.volume(0),f.loop(),D=!0}function q(e){return l.sqrt((2-e)*e)}return e.$set=e=>{"p5"in e&&i(1,l=e.p5),"width"in e&&i(2,r=e.width),"height"in e&&i(3,d=e.height)},[h,l,r,d,function(){y=l.createCanvas(960,540),c=new dat.GUI({autoPlace:!1}),x=document.getElementById("datGui"),x.appendChild(c.domElement),m=new I,u=c.addFolder("Select options"),u.add(m,"Particle_size",0,4).name("Particle size"),u.add(m,"Volumen",0,1).name("Volume"),u.add(m,"Disable_Video").name("Disable video"),u.add(m,"Trail").name("Trail"),u.add(m,"particleDirection").name("Particle direction"),u.add(m,"Pause").name("Pause video"),u.add(m,"listBodyPart",C).name("Body points"),u.add(m,"Save").name("Save frame"),u.open(),f=l.createVideo("dancepose/"+m.listClip+".mp4",N),l.strokeWeight(2),l.fill(255),l.angleMode(l.DEGREES),l.strokeJoin(l.ROUND),l.textAlign(l.CENTER,l.CENTER),l.textSize(24)},function(){g=m.Particle_size,V=m.listBodyPart,E=m.Pause,b=m.Trail,m.Disable_Video&&l.background(0),m.Trail,z&&(l.save("capturaDancePose.png"),z=!1),D||l.text(T,r/2-10,d/2+20),D&&(E?f.pause():f.play()),m.Trail||m.Disable_Video||l.image(f,0,0,r,d),function(e){for(let t=0;t<P.length;t++){let i=P[t].pose;for(let t=0;t<i.keypoints.length;t++){let s=i.keypoints[t];l.frameCount%2==0&&(s.part==="right"+e||s.part==="left"+e)&&s.score>.15&&B(s.position.x,s.position.y,V)}}}(V),f.volume(m.Volumen),V=C;for(let e=0;e<k.length;e++)k[e].display();for(let e=0;e<k.length;e++)k[e].isFinished&&l.frameCount%50==0&&k.splice(e,1)}]}class l extends e{constructor(e){super(),t(this,e,n,null,i,{p5:1,width:2,height:3,setup:4,draw:5},[-1,-1])}get setup(){return this.$$.ctx[4]}get draw(){return this.$$.ctx[5]}}export{l as S,a as v};
